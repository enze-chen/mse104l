
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MSE 104L laboratory 2 exercises &#8212; MSE 104L Data Analysis</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="canonical" href="https://enze-chen.github.io/mse104l/lab2/lab2_exercises_blank.html" />
    <link rel="shortcut icon" href="../_static/mse_ucb.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 3: Precision X-ray Diffractometry" href="../lab3/lab3.html" />
    <link rel="prev" title="Introduction to tabular data in Python" href="intro_tabular_blank.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/mse104l.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">MSE 104L Data Analysis</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Welcome! üëã
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../lab0/jbook_usage.html">
   How to use Jupyter Book üöÄ
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab0/intro_python_jupyter_blank.html">
     Intro to Python üöÄ
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../lab1/lab1.html">
   Lab 1Ô∏è‚É£
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab1/intro_plotting_blank.html">
     Intro to plots üöÄ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab1/lab1_exercises_blank.html">
     Your turn! üöÄ
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="lab2.html">
   Lab 2Ô∏è‚É£
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="intro_tabular_blank.html">
     Intro to tabular data üöÄ
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Your turn! üöÄ
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../lab3/lab3.html">
   Lab 3Ô∏è‚É£
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab3/lab3_exercises_blank.html">
     Your turn! üöÄ
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../lab4/lab4.html">
   Lab 4Ô∏è‚É£
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab4/lab4_exercises_blank.html">
     Your turn! üöÄ
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab5/lab5.html">
   Lab 5Ô∏è‚É£
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab6/lab6.html">
   Lab 6Ô∏è‚É£
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../acknowl.html">
   Acknowledgments
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/lab2/lab2_exercises_blank.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/enze-chen/mse104l"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/enze-chen/mse104l/issues/new?title=Issue%20on%20page%20%2Flab2/lab2_exercises_blank.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        
        <a class="jupyterhub-button" href="https://datahub.berkeley.edu/hub/user-redirect/git-pull?repo=https://github.com/enze-chen/mse104l&urlpath=tree/mse104l/lab2/lab2_exercises_blank.ipynb&branch=main"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/enze-chen/mse104l/blob/main/lab2/lab2_exercises_blank.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contents">
   Contents
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#import-python-packages">
   Import Python packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plot-a-spectra-as-a-sanity-check">
   Plot a spectra as a sanity check
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lattice-constant-calculations">
   Lattice constant calculations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inputs-experimental-data">
     1. Inputs / experimental data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-our-dataframe">
     2. Creating our DataFrame
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#numerical-calculations">
     3. Numerical calculations
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#find-theta">
       3.1 Find
       <span class="math notranslate nohighlight">
        \(\theta\)
       </span>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#take-the-sine">
       3.2 Take the sine
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#calculate-the-interplanar-spacing-d">
       3.3 Calculate the interplanar spacing,
       <span class="math notranslate nohighlight">
        \(d\)
       </span>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#take-the-ratio-of-d-2-values">
       3.4 Take the ratio of
       <span class="math notranslate nohighlight">
        \(d^2\)
       </span>
       values
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#figure-out-the-crystal-structure-and-index-the-peaks">
       3.5 Figure out the crystal structure and index the peaks
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nelson-riley-plots">
   Nelson-Riley plots
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>MSE 104L laboratory 2 exercises</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contents">
   Contents
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#import-python-packages">
   Import Python packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plot-a-spectra-as-a-sanity-check">
   Plot a spectra as a sanity check
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lattice-constant-calculations">
   Lattice constant calculations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inputs-experimental-data">
     1. Inputs / experimental data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-our-dataframe">
     2. Creating our DataFrame
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#numerical-calculations">
     3. Numerical calculations
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#find-theta">
       3.1 Find
       <span class="math notranslate nohighlight">
        \(\theta\)
       </span>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#take-the-sine">
       3.2 Take the sine
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#calculate-the-interplanar-spacing-d">
       3.3 Calculate the interplanar spacing,
       <span class="math notranslate nohighlight">
        \(d\)
       </span>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#take-the-ratio-of-d-2-values">
       3.4 Take the ratio of
       <span class="math notranslate nohighlight">
        \(d^2\)
       </span>
       values
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#figure-out-the-crystal-structure-and-index-the-peaks">
       3.5 Figure out the crystal structure and index the peaks
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nelson-riley-plots">
   Nelson-Riley plots
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="mse-104l-laboratory-2-exercises">
<h1>MSE 104L laboratory 2 exercises<a class="headerlink" href="#mse-104l-laboratory-2-exercises" title="Permalink to this headline">¬∂</a></h1>
<p><em>Authors: Enze Chen (University of California, Berkeley)</em></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an interactive exercise, so you will want to click the <span class="fa fa-rocket"></span> and open the notebook in DataHub (or Colab for non-UCB students).</p>
</div>
<p>This notebook contains a series of exercises to help you process your data from Lab 2.
It doesn‚Äôt answer all of the discussion questions in the lab procedures, but it will help you create some figures that can supplement the narrative of your lab report.</p>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¬∂</a></h2>
<p>The exercises in this notebook include:</p>
<ol class="simple">
<li><p><a class="reference external" href="#Plot-a-spectra-as-a-sanity-check">Plotting refresher</a></p></li>
<li><p><a class="reference external" href="#Lattice-constant-calculations">Calculating lattice constants</a></p></li>
<li><p><a class="reference external" href="#Nelson-Riley-plots">Nelson-Riley plots</a></p></li>
</ol>
</div>
<div class="section" id="import-python-packages">
<h2>Import Python packages<a class="headerlink" href="#import-python-packages" title="Permalink to this headline">¬∂</a></h2>
<p>It can be pretty helpful to import all required packages at the top of the notebook.
We‚Äôve imported a few for you, and we‚Äôll let you figure out what else you might need.
Don‚Äôt forget the plot styling! ‚≠ê</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="plot-a-spectra-as-a-sanity-check">
<h2>Plot a spectra as a sanity check<a class="headerlink" href="#plot-a-spectra-as-a-sanity-check" title="Permalink to this headline">¬∂</a></h2>
<p><a class="reference external" href="#Contents">Back to top</a></p>
<p>Since you‚Äôre working with more powder XRD spectra in this lab, it‚Äôs a good idea to just visualize the spectra and create <strong>a clean figure for each of your unknown samples</strong>.
This is also good practice to remind yourself of the commands from the previous lab.
You should be quite proficient at this by now!</p>
<p>Remember the general steps are:</p>
<ol class="simple">
<li><p>Upload your data to JupyterHub in the <code class="docutils literal notranslate"><span class="pre">lab2</span></code> folder.</p></li>
<li><p>Write code below to process and plot the data.</p>
<ul class="simple">
<li><p>You‚Äôll probably start with <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_csv('sample_N.txt',</span> <span class="pre">names=['something',</span> <span class="pre">'sensible'])</span></code>.</p></li>
<li><p>Call <code class="docutils literal notranslate"><span class="pre">fig,</span> <span class="pre">ax</span> <span class="pre">=</span> <span class="pre">plt.subplots()</span></code> to get things started.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">ax.plot()</span></code> and <code class="docutils literal notranslate"><span class="pre">ax.set()</span></code> to plot and style things.</p></li>
</ul>
</li>
<li><p>Save the figure and download it to your computer.</p>
<ul class="simple">
<li><p>Recall this is <code class="docutils literal notranslate"><span class="pre">fig.savefig('my_figure.png',</span> <span class="pre">dpi=300,</span> <span class="pre">bbox_inches='tight')</span></code>.</p></li>
</ul>
</li>
</ol>
<p>If you don‚Äôt remember what you did in lab 1, you can always reference your completed notebooks (assuming you did them) by going to JupyterHub (<a class="reference external" href="https://datahub.berkeley.edu">https://datahub.berkeley.edu</a>) and opening them üìÅ &gt; <code class="docutils literal notranslate"><span class="pre">mse104l</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">lab1</span></code>.
<strong>Copy+paste previous code</strong> is definitely a thing!</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
</pre></div>
</div>
</div>
</div>
<div class='alert alert-warning'>
    For your cubic crystal structures, you don't <i>have to</i> use a programmatic solution to solve for the lattice constants.
    But realize that this means you'll have to calculate the lattice constant (<i>a</i>) corresponding to each peak by hand, and that gets <i>repetitive</i>.
    Often times, if we find ourselves doing the same set of structured tasks over and over again, it's a good case to turn to a programmatic solution to automate things. 
    Also, you'll thank us when you get to Lab 3. üòâ
</div></div>
<div class="section" id="lattice-constant-calculations">
<h2>Lattice constant calculations<a class="headerlink" href="#lattice-constant-calculations" title="Permalink to this headline">¬∂</a></h2>
<p><a class="reference external" href="#Contents">Back to top</a></p>
<p>In this course, you can expect to be given an XRD spectrum and deduce the crystal structure from the peak positions.
This is a tedious exercise by hand because we have to compute each peak individually, so we‚Äôll try to speed things up and <em>automate</em> the calculations using Python.</p>
<p>Arguably the most important equation is <strong>Bragg‚Äôs law</strong>, given by</p>
<div class="math notranslate nohighlight">
\[ n\lambda = 2d \sin(\theta) \tag{1} \]</div>
<p>where <span class="math notranslate nohighlight">\(n\)</span> is the order (typically <span class="math notranslate nohighlight">\(1\)</span>), <span class="math notranslate nohighlight">\(\lambda\)</span> is the wavelength, <span class="math notranslate nohighlight">\(d\)</span> is the interplanar spacing, and <span class="math notranslate nohighlight">\(\theta\)</span> is the Bragg angle.
We‚Äôll be manipulating this equation to calculate lattice constants.</p>
<div class="section" id="inputs-experimental-data">
<h3>1. Inputs / experimental data<a class="headerlink" href="#inputs-experimental-data" title="Permalink to this headline">¬∂</a></h3>
<p>Start by typing in your known values:</p>
<ul class="simple">
<li><p>Wavelength: A <code class="docutils literal notranslate"><span class="pre">float</span></code> in <em>nanometers</em>, most likely <code class="docutils literal notranslate"><span class="pre">0.154</span></code> corresponding to Cu-K<span class="math notranslate nohighlight">\(\alpha\)</span>.</p></li>
<li><p>Angles: Values are <span class="math notranslate nohighlight">\(2\theta\)</span> in <em>degrees</em>. The angles should be stored in a <code class="docutils literal notranslate"><span class="pre">list</span></code> in the form</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.23</span><span class="p">,</span> <span class="mf">4.56</span><span class="p">,</span> <span class="mf">7.89</span><span class="p">]</span>  
</pre></div>
</div>
<p>for however many <span class="math notranslate nohighlight">\(2\theta\)</span> peak values you‚Äôve measured (maybe 3 to 5, or so).
If you don‚Äôt have your own data, or just want to try these exercises for fun, you can use the sample data <a class="reference external" href="https://github.com/enze-chen/learning_modules/blob/master/data/xrd_peaks_CuKa.csv">in this file</a> (ignore intensity for this lab).</p>
<p><strong>Note</strong>: Unlike the spectra plots, we <strong>only</strong> need the angles corresponding to the <em>peak positions</em>, <strong>not all angles</strong> collected by the diffractometer. üòÖ</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
<span class="n">wavelength</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">angles</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="creating-our-dataframe">
<h3>2. Creating our DataFrame<a class="headerlink" href="#creating-our-dataframe" title="Permalink to this headline">¬∂</a></h3>
<p>Now it‚Äôs time to construct our <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">pandas DataFrame</a> using the <code class="docutils literal notranslate"><span class="pre">dict</span></code> version of the constructor.
We‚Äôll need one column (<code class="docutils literal notranslate"><span class="pre">key:value</span></code> pair) for the <code class="docutils literal notranslate"><span class="pre">wavelength</span></code> and another for <code class="docutils literal notranslate"><span class="pre">angles</span></code>.
Once you‚Äôve constructed the DataFrame, the <code class="docutils literal notranslate"><span class="pre">df</span></code> variable on the last line will display it.</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>

<span class="n">df</span>  <span class="c1"># you should see two columns with your data! Always good to show the df</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="numerical-calculations">
<h3>3. Numerical calculations<a class="headerlink" href="#numerical-calculations" title="Permalink to this headline">¬∂</a></h3>
<p>Note that if we assume <span class="math notranslate nohighlight">\(n=1\)</span> in Bragg‚Äôs law, then we have three unknowns.
In our case, we know the wavelength and angle, so we can find the interplanar spacing as follows:</p>
<div class="math notranslate nohighlight">
\[ d = \frac{\lambda}{2 \sin (\theta)} \tag{2}\]</div>
<p>We will try to do this in a very principled fashion.
<em>Modular solutions</em> are very important when programming.</p>
<div class="section" id="find-theta">
<h4>3.1 Find <span class="math notranslate nohighlight">\(\theta\)</span><a class="headerlink" href="#find-theta" title="Permalink to this headline">¬∂</a></h4>
<p>First, we need to get the <span class="math notranslate nohighlight">\(\theta\)</span> values.
We can do this by creating a new column in the DataFrame whose entries are computed by dividing the existing column of <span class="math notranslate nohighlight">\(2\theta\)</span> values by 2.
Also, we <strong>strongly recommend</strong> that you convert the angles to radians using the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.deg2rad.html"><code class="docutils literal notranslate"><span class="pre">np.deg2rad()</span></code></a> function on the result. ‚≠ê</p>
<p>So, the syntax will look something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;new_column_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;column_of_2theta_angles&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Of course, please use better names.
After you‚Äôve done this, display the DataFrame like we did above to confirm you did it correctly.</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="take-the-sine">
<h4>3.2 Take the sine<a class="headerlink" href="#take-the-sine" title="Permalink to this headline">¬∂</a></h4>
<p>Next, we‚Äôll compute the sine of the <span class="math notranslate nohighlight">\(\theta\)</span> values using <code class="docutils literal notranslate"><span class="pre">np.sin()</span></code>, whose argument inside the parentheses <em>must be in radians</em> ‚Äîgood thing we converted it earlier!
Add another column to your DataFrame with the sine of the angles.</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="calculate-the-interplanar-spacing-d">
<h4>3.3 Calculate the interplanar spacing, <span class="math notranslate nohighlight">\(d\)</span><a class="headerlink" href="#calculate-the-interplanar-spacing-d" title="Permalink to this headline">¬∂</a></h4>
<p>Now you have all the pieces in place for calculating <span class="math notranslate nohighlight">\(d\)</span>. What‚Äôs awesome about pandas is that you can perform element-wise division of two columns by use of the division operator, <code class="docutils literal notranslate"><span class="pre">/</span></code>.
Create a new column that does exactly what Equation (2) says.
Don‚Äôt forget to include parentheses when you multiply the denominator by 2!</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="take-the-ratio-of-d-2-values">
<h4>3.4 Take the ratio of <span class="math notranslate nohighlight">\(d^2\)</span> values<a class="headerlink" href="#take-the-ratio-of-d-2-values" title="Permalink to this headline">¬∂</a></h4>
<p>At this point, you know to take the ratio between the first distance and each distance measured; however, there‚Äôs a small ‚Äúhack‚Äù to this. üòé</p>
<p>If you do it naively, you‚Äôll get numbers like <code class="docutils literal notranslate"><span class="pre">1.000</span></code>, <code class="docutils literal notranslate"><span class="pre">1.414</span></code>, <code class="docutils literal notranslate"><span class="pre">1.732</span></code>, and the like.
Unless you know your square root approximations, this can be tricky to decipher.
We prefer to <strong>square</strong> the distances first, and then take the ratio.
We‚Äôve done this below for some sample data, but you may have to modify it to match your column names.</p>
<p>The resulting column should have values that are close to integers or multiples of a simple fraction like <span class="math notranslate nohighlight">\(\frac{1}{3}\)</span>.</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
<span class="c1"># square the distances</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;d^2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span>

<span class="c1"># take the ratio - finish this one-liner</span>


<span class="c1"># show the df</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="figure-out-the-crystal-structure-and-index-the-peaks">
<h4>3.5 Figure out the crystal structure and index the peaks<a class="headerlink" href="#figure-out-the-crystal-structure-and-index-the-peaks" title="Permalink to this headline">¬∂</a></h4>
<p>OK! At this point, the ratios should be enough for you to deduce which crystal structure you have on your hands.
This will allow you to index the peaks accordingly.
You can probably do this part by hand.</p>
</div>
</div>
</div>
<div class="section" id="nelson-riley-plots">
<h2>Nelson-Riley plots<a class="headerlink" href="#nelson-riley-plots" title="Permalink to this headline">¬∂</a></h2>
<p><a class="reference external" href="#Contents">Back to top</a></p>
<p>Recall that the Nelson-Riley function is used for cubic systems to get a more accurate measurement of the lattice constant.
The Nelson-Riley function is</p>
<div class="math notranslate nohighlight">
\[ \text{NR} = \frac{\cos^{2} \theta}{\sin \theta} + \frac{\cos^2 \theta}{\theta} \tag{3} \]</div>
<p>You can probably sense where this is going.
If you‚Äôve done the above calculations with the pandas DataFrame, it‚Äôs quite easy to <strong>add another column</strong> of Nelson-Riley values!
Only one line of number crunching with Equation (3).
If you already did the previous parts and come back to this section later, you‚Äôll see with coding that it‚Äôs very easy to pick up where you left off by extending the code you‚Äôve already created.</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
</pre></div>
</div>
</div>
</div>
<p>Recall that for a cubic system the interplanar spacing between <span class="math notranslate nohighlight">\((hkl)\)</span> planes is given by (Table 4.1.2 in <a class="reference external" href="https://academic.oup.com/book/43510">Krishnan</a>):</p>
<div class="math notranslate nohighlight">
\[ \frac{1}{d_{hkl}} = \frac{\sqrt{h^2 + k^2 + l^2}}{a} \stackrel{\text{def}}{=} \frac{s_{hkl}}{a} \implies a = s_{hkl} \cdot d_{hkl}\]</div>
<p>In order to get the cubic lattice constants for our Nelson-Riley plots, we need to first include <span class="math notranslate nohighlight">\(s\)</span>, which we can hard code below.
Based on the structure (SC, BCC, FCC), index the planes accordingly to get <span class="math notranslate nohighlight">\(hkl\)</span> values to calculate <span class="math notranslate nohighlight">\(s\)</span>.
To clarify what we mean, we‚Äôve left in the code structure below, which you‚Äôll have to again modify and fill in the calculation to get <span class="math notranslate nohighlight">\(a\)</span>.
In the JupyterHub, we‚Äôve also included a PNG of our final data table (<code class="docutils literal notranslate"><span class="pre">xrd_dataframe.png</span></code>, using our fake data) so you have a sense of what we were intending‚Äîand if you did something else, that‚Äôs OK!</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">19</span><span class="p">])</span>   <span class="c1"># based on our dummy data</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>    <span class="c1"># create a column</span>
<span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>

<span class="n">df</span>   <span class="c1"># add in one line of multiplication above to calculate a!</span>
</pre></div>
</div>
</div>
</div>
<p>Now you‚Äôre all set to make your NR plot!</p>
<ol class="simple">
<li><p>‚≠ê First plot the individual data points using a method like <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.scatter.html"><code class="docutils literal notranslate"><span class="pre">ax.scatter()</span></code></a>. The <code class="docutils literal notranslate"><span class="pre">s</span></code> parameter changes the marker size.</p></li>
<li><p>Then compute a line of best fit using <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.polyfit.html"><code class="docutils literal notranslate"><span class="pre">np.polyfit()</span></code></a> and add it to the plot.</p></li>
<li><p>‚≠ê You may want to <code class="docutils literal notranslate"><span class="pre">ax.set()</span></code> the <span class="math notranslate nohighlight">\(x\)</span>-axis limits to be bounded by the <span class="math notranslate nohighlight">\(y\)</span>-intercept on the left.</p></li>
<li><p>Of course, with <code class="docutils literal notranslate"><span class="pre">np.polyfit()</span></code>, it directly returns the <span class="math notranslate nohighlight">\(y\)</span>-intercept which you can print out!</p></li>
</ol>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¬∂</a></h2>
<p><a class="reference external" href="#Contents">Back to top</a></p>
<p>This concludes the programming exercises for Lab 2.
Congratulations!
We hope you‚Äôre proud of the plots that you generated and wish you luck with the lab writeup. üìù</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./lab2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="intro_tabular_blank.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Introduction to tabular data in Python</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../lab3/lab3.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab 3: Precision X-ray Diffractometry</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Enze Chen and Andrew Minor<br/>
    
        &copy; Copyright 2022.<br/>
      <div class="extra_footer">
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
</a>

      </div>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>